<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å…è´¹åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…· - å¿«é€Ÿå‹ç¼©JPGã€PNGã€WebPå›¾ç‰‡ï¼Œå‡å°æ–‡ä»¶å¤§å°ï¼Œä¿æŒé«˜è´¨é‡ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†">
    <meta name="keywords" content="å›¾ç‰‡å‹ç¼©,åœ¨çº¿å‹ç¼©,å›¾ç‰‡ä¼˜åŒ–,JPGå‹ç¼©,PNGå‹ç¼©,WebP,å›¾ç‰‡å¤§å°">
    <title>åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…· - å…è´¹å›¾ç‰‡å‹ç¼©å™¨</title>
    <link rel="canonical" href="https://milomao.github.io/tools/image-compress.html">
    <link rel="stylesheet" href="../css/style.css">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container">
                <div class="nav-brand">
                    <h1><a href="../" style="color: inherit; text-decoration: none;">ğŸ› ï¸ å·¥å…·å¯¼èˆª</a></h1>
                </div>
                <div class="nav-menu">
                    <a href="../" class="nav-link">é¦–é¡µ</a>
                    <a href="../#tools" class="nav-link">å·¥å…·åˆ†ç±»</a>
                    <a href="../#popular" class="nav-link">çƒ­é—¨å·¥å…·</a>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <!-- Tool Hero Section -->
        <section class="tool-hero">
            <div class="container">
                <h1>åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…·</h1>
                <p>æ™ºèƒ½å‹ç¼©å›¾ç‰‡ï¼Œå‡å°æ–‡ä»¶å¤§å°ï¼Œä¿æŒé«˜ç”»è´¨</p>
                <div class="tool-features">
                    <span>ğŸ¯ æ™ºèƒ½å‹ç¼©</span>
                    <span>ğŸ“± æ”¯æŒå¤šæ ¼å¼</span>
                    <span>âš¡ æ‰¹é‡å¤„ç†</span>
                    <span>ğŸ”’ æœ¬åœ°å¤„ç†</span>
                </div>
            </div>
        </section>

        <!-- Ad Space -->
        <div class="ad-space ad-banner">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXX"
                 data-ad-slot="XXXXXXXXXX"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>

        <!-- Tool Interface -->
        <section class="tool-interface">
            <div class="container">
                <div class="upload-area">
                    <div class="upload-box" id="uploadBox">
                        <div class="upload-icon">ğŸ–¼ï¸</div>
                        <h3>é€‰æ‹©å›¾ç‰‡æˆ–æ‹–æ‹½åˆ°è¿™é‡Œ</h3>
                        <p>æ”¯æŒJPGã€PNGã€WebPæ ¼å¼ï¼Œæœ€å¤§10MB</p>
                        <input type="file" id="fileInput" accept="image/*" multiple>
                        <button class="upload-btn">é€‰æ‹©å›¾ç‰‡</button>
                    </div>
                </div>

                <div class="compression-settings" id="compressionSettings" style="display: none;">
                    <h3>å‹ç¼©è®¾ç½®</h3>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label>å‹ç¼©è´¨é‡</label>
                            <div class="quality-slider">
                                <input type="range" id="qualitySlider" min="10" max="100" value="80">
                                <span id="qualityValue">80%</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>æœ€å¤§å®½åº¦ï¼ˆåƒç´ ï¼‰</label>
                            <input type="number" id="maxWidth" placeholder="ç•™ç©ºä¿æŒåŸå°ºå¯¸" min="100" max="5000">
                        </div>
                        <div class="setting-item">
                            <label>è¾“å‡ºæ ¼å¼</label>
                            <select id="outputFormat">
                                <option value="original">ä¿æŒåŸæ ¼å¼</option>
                                <option value="jpeg">JPEG</option>
                                <option value="png">PNG</option>
                                <option value="webp">WebP</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="image-preview" id="imagePreview" style="display: none;">
                    <h3>å›¾ç‰‡é¢„è§ˆä¸å¯¹æ¯”</h3>
                    <div class="preview-container" id="previewContainer">
                        <!-- é¢„è§ˆå›¾ç‰‡å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                    </div>
                    <button class="compress-btn" id="compressBtn">å¼€å§‹å‹ç¼©</button>
                </div>

                <div class="download-section" id="downloadSection" style="display: none;">
                    <h3>å‹ç¼©å®Œæˆ</h3>
                    <div class="compression-stats" id="compressionStats"></div>
                    <div class="download-files" id="downloadFiles"></div>
                    <button class="download-all-btn" id="downloadAllBtn">ä¸‹è½½å…¨éƒ¨</button>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section class="features-section">
            <div class="container">
                <h2>å·¥å…·ç‰¹æ€§</h2>
                <div class="features-grid">
                    <div class="feature-item">
                        <div class="feature-icon">ğŸ¯</div>
                        <h3>æ™ºèƒ½å‹ç¼©</h3>
                        <p>é‡‡ç”¨å…ˆè¿›ç®—æ³•ï¼Œåœ¨ä¿æŒå›¾ç‰‡è´¨é‡çš„åŒæ—¶æœ€å¤§ç¨‹åº¦å‡å°æ–‡ä»¶å¤§å°</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">ğŸ“±</div>
                        <h3>å¤šæ ¼å¼æ”¯æŒ</h3>
                        <p>æ”¯æŒJPGã€PNGã€WebPç­‰ä¸»æµå›¾ç‰‡æ ¼å¼ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">âš¡</div>
                        <h3>æ‰¹é‡å¤„ç†</h3>
                        <p>æ”¯æŒåŒæ—¶å¤„ç†å¤šå¼ å›¾ç‰‡ï¼Œæé«˜å·¥ä½œæ•ˆç‡</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">ğŸ”’</div>
                        <h3>éšç§å®‰å…¨</h3>
                        <p>æ‰€æœ‰å¤„ç†åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œå›¾ç‰‡ä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ad Space -->
        <div class="ad-space ad-banner">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXX"
                 data-ad-slot="XXXXXXXXXX"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>

        <!-- Use Cases -->
        <section class="use-cases">
            <div class="container">
                <h2>é€‚ç”¨åœºæ™¯</h2>
                <div class="cases-grid">
                    <div class="case-item">
                        <h3>ğŸŒ ç½‘ç«™ä¼˜åŒ–</h3>
                        <p>å‹ç¼©ç½‘ç«™å›¾ç‰‡ï¼Œæå‡é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒ</p>
                    </div>
                    <div class="case-item">
                        <h3>ğŸ“§ é‚®ä»¶é™„ä»¶</h3>
                        <p>å‡å°å›¾ç‰‡å¤§å°ï¼Œé¿å…é‚®ä»¶é™„ä»¶è¿‡å¤§çš„é—®é¢˜</p>
                    </div>
                    <div class="case-item">
                        <h3>ğŸ“± ç¤¾äº¤åª’ä½“</h3>
                        <p>ä¼˜åŒ–ç¤¾äº¤å¹³å°å‘å¸ƒçš„å›¾ç‰‡ï¼ŒèŠ‚çœæµé‡å’Œå­˜å‚¨ç©ºé—´</p>
                    </div>
                    <div class="case-item">
                        <h3>â˜ï¸ äº‘å­˜å‚¨</h3>
                        <p>å‹ç¼©å›¾ç‰‡åä¸Šä¼ äº‘ç›˜ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tips -->
        <section class="tips-section">
            <div class="container">
                <h2>å‹ç¼©å»ºè®®</h2>
                <div class="tips-content">
                    <div class="tip-item">
                        <h3>ğŸ“¸ ç…§ç‰‡å‹ç¼©</h3>
                        <p>å¯¹äºç…§ç‰‡ï¼Œå»ºè®®ä½¿ç”¨JPEGæ ¼å¼ï¼Œè´¨é‡è®¾ç½®åœ¨70-85%ä¹‹é—´ï¼Œæ—¢ä¿è¯ç”»è´¨åˆæœ‰æ•ˆå‡å°æ–‡ä»¶å¤§å°ã€‚</p>
                    </div>
                    <div class="tip-item">
                        <h3>ğŸ¨ å›¾æ ‡å›¾å½¢</h3>
                        <p>åŒ…å«é€æ˜èƒŒæ™¯æˆ–ç®€å•å›¾å½¢çš„å›¾ç‰‡ï¼Œå»ºè®®ä½¿ç”¨PNGæ ¼å¼ï¼Œå¯ä»¥ä¿æŒè¾¹ç¼˜æ¸…æ™°ã€‚</p>
                    </div>
                    <div class="tip-item">
                        <h3>ğŸŒ ç½‘é¡µå›¾ç‰‡</h3>
                        <p>WebPæ ¼å¼æä¾›æ›´å¥½çš„å‹ç¼©ç‡ï¼Œé€‚åˆç°ä»£æµè§ˆå™¨ï¼Œå¯ä»¥æ˜¾è‘—å‡å°æ–‡ä»¶å¤§å°ã€‚</p>
                    </div>
                    <div class="tip-item">
                        <h3>ğŸ“ å°ºå¯¸è°ƒæ•´</h3>
                        <p>å¦‚æœä¸éœ€è¦é«˜åˆ†è¾¨ç‡ï¼Œå¯ä»¥é€‚å½“è°ƒæ•´å›¾ç‰‡å°ºå¯¸ï¼Œè¿™æ˜¯å‡å°æ–‡ä»¶å¤§å°æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Related Tools -->
        <section class="related-tools">
            <div class="container">
                <h2>ç›¸å…³å·¥å…·</h2>
                <div class="tools-grid">
                    <div class="tool-card">
                        <div class="tool-icon">ğŸ”„</div>
                        <h3>å›¾ç‰‡æ ¼å¼è½¬æ¢</h3>
                        <p>è½¬æ¢å›¾ç‰‡æ ¼å¼ï¼Œæ”¯æŒå¤šç§æ ¼å¼äº’è½¬</p>
                        <a href="image-converter.html" class="tool-link">ä½¿ç”¨å·¥å…·</a>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">âœ‚ï¸</div>
                        <h3>å›¾ç‰‡è£å‰ª</h3>
                        <p>åœ¨çº¿è£å‰ªå›¾ç‰‡ï¼Œè°ƒæ•´å°ºå¯¸å’Œæ¯”ä¾‹</p>
                        <a href="image-crop.html" class="tool-link">ä½¿ç”¨å·¥å…·</a>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">ğŸ“</div>
                        <h3>å›¾ç‰‡å°ºå¯¸è°ƒæ•´</h3>
                        <p>è°ƒæ•´å›¾ç‰‡å®½åº¦å’Œé«˜åº¦ï¼Œæ‰¹é‡å¤„ç†</p>
                        <a href="image-resize.html" class="tool-link">ä½¿ç”¨å·¥å…·</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 å·¥å…·å¯¼èˆª. All rights reserved. | <a href="../privacy.html">éšç§æ”¿ç­–</a></p>
            </div>
        </div>
    </footer>

    <script src="../js/main.js"></script>
    
    <style>
        .tool-hero {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 3rem 0;
            text-align: center;
        }

        .compression-settings {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            margin-bottom: 2rem;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .setting-item label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .quality-slider {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .quality-slider input {
            flex: 1;
        }

        .quality-slider span {
            min-width: 40px;
            text-align: center;
            font-weight: 500;
            color: var(--primary-color);
        }

        .setting-item input,
        .setting-item select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
        }

        .image-preview {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .preview-container {
            display: grid;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .preview-item {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1rem;
        }

        .preview-side {
            text-align: center;
        }

        .preview-side h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .preview-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .image-info {
            margin-top: 1rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .compress-btn {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            width: 100%;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .compress-btn:hover {
            background: #059669;
        }

        .compression-stats {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .stat-item:last-child {
            margin-bottom: 0;
        }

        .download-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        .download-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.875rem;
        }

        .download-all-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            width: 100%;
        }

        .features-section {
            background: var(--bg-secondary);
            padding: 4rem 0;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-item {
            text-align: center;
            padding: 2rem;
            background: var(--bg-primary);
            border-radius: var(--border-radius-lg);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .use-cases {
            padding: 4rem 0;
        }

        .cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .case-item {
            padding: 2rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            transition: var(--transition);
        }

        .case-item:hover {
            box-shadow: var(--shadow);
        }

        .tips-section {
            background: var(--bg-secondary);
            padding: 4rem 0;
        }

        .tips-content {
            margin-top: 2rem;
        }

        .tip-item {
            background: var(--bg-primary);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            margin-bottom: 2rem;
            border-left: 4px solid var(--primary-color);
        }

        .tip-item:last-child {
            margin-bottom: 0;
        }

        .tip-item h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .related-tools {
            padding: 4rem 0;
        }

        @media (max-width: 768px) {
            .preview-item {
                grid-template-columns: 1fr;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const uploadBox = document.getElementById('uploadBox');
            const fileInput = document.getElementById('fileInput');
            const compressionSettings = document.getElementById('compressionSettings');
            const imagePreview = document.getElementById('imagePreview');
            const qualitySlider = document.getElementById('qualitySlider');
            const qualityValue = document.getElementById('qualityValue');
            const compressBtn = document.getElementById('compressBtn');
            const downloadSection = document.getElementById('downloadSection');

            let selectedFiles = [];

            // æ–‡ä»¶ä¸Šä¼ å¤„ç†
            uploadBox.addEventListener('click', () => fileInput.click());
            uploadBox.addEventListener('dragover', handleDragOver);
            uploadBox.addEventListener('drop', handleDrop);
            fileInput.addEventListener('change', handleFileSelect);
            qualitySlider.addEventListener('input', updateQualityValue);
            compressBtn.addEventListener('click', startCompression);

            function handleDragOver(e) {
                e.preventDefault();
                uploadBox.classList.add('dragover');
            }

            function handleDrop(e) {
                e.preventDefault();
                uploadBox.classList.remove('dragover');
                const files = e.dataTransfer.files;
                handleFiles(files);
            }

            function handleFileSelect(e) {
                const files = e.target.files;
                handleFiles(files);
            }

            function handleFiles(files) {
                const validFiles = Array.from(files).filter(file => 
                    file.type.startsWith('image/') && file.size <= 10 * 1024 * 1024
                );

                if (validFiles.length > 0) {
                    selectedFiles = validFiles;
                    showPreview(validFiles);
                    compressionSettings.style.display = 'block';
                    imagePreview.style.display = 'block';
                }
            }

            function showPreview(files) {
                const container = document.getElementById('previewContainer');
                container.innerHTML = '';

                files.forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const previewItem = document.createElement('div');
                        previewItem.className = 'preview-item';
                        previewItem.innerHTML = `
                            <div class="preview-side">
                                <h4>åŸå›¾</h4>
                                <img src="${e.target.result}" alt="åŸå›¾" class="preview-image">
                                <div class="image-info">
                                    <div>æ–‡ä»¶å: ${file.name}</div>
                                    <div>å¤§å°: ${(file.size / 1024 / 1024).toFixed(2)} MB</div>
                                    <div>ç±»å‹: ${file.type}</div>
                                </div>
                            </div>
                            <div class="preview-side">
                                <h4>å‹ç¼©å (é¢„è§ˆ)</h4>
                                <img src="${e.target.result}" alt="å‹ç¼©å" class="preview-image" id="compressed-${index}">
                                <div class="image-info" id="compressed-info-${index}">
                                    <div>é¢„è®¡å‡å°: ~30%</div>
                                    <div>æ–°å¤§å°: ~${(file.size * 0.7 / 1024 / 1024).toFixed(2)} MB</div>
                                </div>
                            </div>
                        `;
                        container.appendChild(previewItem);
                    };
                    reader.readAsDataURL(file);
                });
            }

            function updateQualityValue() {
                qualityValue.textContent = qualitySlider.value + '%';
                // å®æ—¶æ›´æ–°é¢„è§ˆ
                updatePreview();
            }

            function updatePreview() {
                // è¿™é‡Œå¯ä»¥å®ç°å®æ—¶é¢„è§ˆåŠŸèƒ½
                // ç”±äºæ¼”ç¤ºç›®çš„ï¼Œåªæ›´æ–°ä¼°ç®—å€¼
                const quality = qualitySlider.value / 100;
                selectedFiles.forEach((file, index) => {
                    const infoDiv = document.getElementById(`compressed-info-${index}`);
                    if (infoDiv) {
                        const estimatedSize = file.size * quality;
                        const reduction = ((file.size - estimatedSize) / file.size * 100).toFixed(1);
                        infoDiv.innerHTML = `
                            <div>é¢„è®¡å‡å°: ~${reduction}%</div>
                            <div>æ–°å¤§å°: ~${(estimatedSize / 1024 / 1024).toFixed(2)} MB</div>
                        `;
                    }
                });
            }

            function startCompression() {
                // è®°å½•å‹ç¼©äº‹ä»¶
                gtag('event', 'compression_start', {
                    'tool': 'image_compress',
                    'file_count': selectedFiles.length
                });

                // æ¨¡æ‹Ÿå‹ç¼©è¿‡ç¨‹
                compressBtn.textContent = 'å‹ç¼©ä¸­...';
                compressBtn.disabled = true;

                setTimeout(() => {
                    compressionComplete();
                }, 2000);
            }

            function compressionComplete() {
                imagePreview.style.display = 'none';
                downloadSection.style.display = 'block';

                // è®°å½•å‹ç¼©å®Œæˆäº‹ä»¶
                gtag('event', 'compression_complete', {
                    'tool': 'image_compress',
                    'file_count': selectedFiles.length
                });

                // æ˜¾ç¤ºå‹ç¼©ç»Ÿè®¡
                const quality = qualitySlider.value / 100;
                const totalOriginalSize = selectedFiles.reduce((sum, file) => sum + file.size, 0);
                const totalCompressedSize = totalOriginalSize * quality;
                const reduction = ((totalOriginalSize - totalCompressedSize) / totalOriginalSize * 100).toFixed(1);

                document.getElementById('compressionStats').innerHTML = `
                    <div class="stat-item">
                        <span>å¤„ç†æ–‡ä»¶æ•°:</span>
                        <strong>${selectedFiles.length}</strong>
                    </div>
                    <div class="stat-item">
                        <span>åŸå§‹å¤§å°:</span>
                        <strong>${(totalOriginalSize / 1024 / 1024).toFixed(2)} MB</strong>
                    </div>
                    <div class="stat-item">
                        <span>å‹ç¼©åå¤§å°:</span>
                        <strong>${(totalCompressedSize / 1024 / 1024).toFixed(2)} MB</strong>
                    </div>
                    <div class="stat-item">
                        <span>èŠ‚çœç©ºé—´:</span>
                        <strong style="color: var(--success-color);">${reduction}%</strong>
                    </div>
                `;

                // æ˜¾ç¤ºä¸‹è½½æ–‡ä»¶åˆ—è¡¨
                const downloadFiles = document.getElementById('downloadFiles');
                downloadFiles.innerHTML = selectedFiles.map((file, index) => `
                    <div class="download-item">
                        <span>ğŸ–¼ï¸ ${file.name.replace(/\.[^/.]+$/, '')}_compressed.${file.name.split('.').pop()}</span>
                        <button class="download-btn" onclick="downloadSingleFile(${index})">ä¸‹è½½</button>
                    </div>
                `).join('');

                compressBtn.textContent = 'å¼€å§‹å‹ç¼©';
                compressBtn.disabled = false;
            }

            // å…¨å±€å‡½æ•°
            window.downloadSingleFile = function(index) {
                gtag('event', 'file_download', {
                    'tool': 'image_compress',
                    'file_index': index
                });
                alert('è¿™æ˜¯æ¼”ç¤ºç‰ˆæœ¬ï¼Œå®é™…éƒ¨ç½²æ—¶è¿™é‡Œä¼šä¸‹è½½å‹ç¼©åçš„å›¾ç‰‡ã€‚');
            };

            document.getElementById('downloadAllBtn').addEventListener('click', function() {
                gtag('event', 'download_all', {
                    'tool': 'image_compress',
                    'file_count': selectedFiles.length
                });
                alert('è¿™æ˜¯æ¼”ç¤ºç‰ˆæœ¬ï¼Œå®é™…éƒ¨ç½²æ—¶è¿™é‡Œä¼šä¸‹è½½æ‰€æœ‰å‹ç¼©åçš„å›¾ç‰‡ã€‚');
            });
        });
    </script>
</body>
</html>
